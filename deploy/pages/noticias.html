<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todas as Notícias - Portal IA Brasil</title>
    <meta name="description" content="Todas as notícias sobre inteligência artificial em português. Fique por dentro das últimas novidades do mundo da IA."> 
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="../assets/images/logo/favicon.png">
</head>
<body>
    <!-- Cabeçalho -->
    <header>
        <div class="container">
            <div class="logo">
                <h1><a href="../index.html">Portal<span>IA</span></a></h1>
            </div>
            <nav>
                <button class="mobile-menu-btn">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
                <ul class="menu">
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="noticias.html" class="active">Notícias</a></li>
                    <li><a href="../index.html#produtos">Produtos e Empresas</a></li>
                    <li><a href="../index.html#sobre">Sobre</a></li>
                    <li><a href="../index.html#contato">Contato</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Banner de Notícias -->
    <section class="hero-news">
        <div class="container">
            <div class="hero-news-content">
                <h2>Todas as Notícias de IA</h2>
                <p>Fique por dentro das últimas novidades do mundo da Inteligência Artificial</p>
            </div>
        </div>
    </section>

    <!-- Controles de Notícias -->
    <section class="section">
        <div class="container">
            <div class="news-controls">
                <div class="news-search">
                    <input type="text" id="news-search-input" placeholder="Buscar notícias...">
                    <button id="news-search-btn"><i class="fas fa-search"></i></button>
                </div>
                <div class="news-filters">
                    <button class="filter-btn active" data-category="all">Todas</button>
                    <button class="filter-btn" data-category="avanços-tecnológicos">Avanços Tecnológicos</button>
                    <button class="filter-btn" data-category="ia-no-brasil">IA no Brasil</button>
                    <button class="filter-btn" data-category="regulamentações-e-ética">Regulamentações e Ética</button>
                    <button class="filter-btn" data-category="pesquisa-e-desenvolvimento">Pesquisa e Desenvolvimento</button>
                    <button class="filter-btn" data-category="impacto-social">Impacto Social</button>
                </div>
            </div>
            
            <div id="todas-noticias-container" class="news-grid">
                <!-- As notícias serão carregadas dinamicamente aqui -->
                <div class="loading-news">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Carregando notícias...</p>
                </div>
            </div>
            
            <div class="news-count" id="news-count">
                Mostrando <span id="news-shown">0</span> de <span id="news-total">0</span> notícias
            </div>
        </div>
    </section>

    <!-- Newsletter -->
    <section class="newsletter">
        <div class="container">
            <div class="newsletter-content">
                <h2>Fique por dentro das novidades</h2>
                <p>Assine nossa newsletter e receba as últimas notícias sobre IA diretamente no seu email</p>
                <form action="https://tinyletter.com/seu-username" method="post" target="_blank" class="newsletter-form">
                    <input type="email" name="email" placeholder="Seu melhor email" required>
                    <button type="submit" class="btn primary">Assinar</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Rodapé -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-about">
                    <h3>Portal<span>IA</span></h3>
                    <p>O maior portal sobre inteligência artificial em português. Notícias, produtos e empresas do mundo da IA.</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-links">
                    <h3>Links Rápidos</h3>
                    <ul>
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="noticias.html">Notícias</a></li>
                        <li><a href="../index.html#produtos">Produtos e Empresas</a></li>
                        <li><a href="../index.html#sobre">Sobre</a></li>
                        <li><a href="../index.html#contato">Contato</a></li>
                    </ul>
                </div>
                <div class="footer-categories">
                    <h3>Categorias</h3>
                    <ul>
                        <li><a href="noticias.html?category=avanços-tecnológicos">Avanços Tecnológicos</a></li>
                        <li><a href="noticias.html?category=ia-no-brasil">IA no Brasil</a></li>
                        <li><a href="noticias.html?category=regulamentações-e-ética">Regulamentações e Ética</a></li>
                        <li><a href="noticias.html?category=pesquisa-e-desenvolvimento">Pesquisa e Desenvolvimento</a></li>
                        <li><a href="noticias.html?category=impacto-social">Impacto Social</a></li>
                    </ul>
                </div>
                <div class="footer-products">
                    <h3>Produtos</h3>
                    <ul>
                        <li><a href="../index.html#produtos">IA para Negócios</a></li>
                        <li><a href="../index.html#produtos">IA para Imagens</a></li>
                        <li><a href="../index.html#produtos">IA para Desenvolvedores</a></li>
                        <li><a href="../index.html#produtos">IA para Educação</a></li>
                        <li><a href="../index.html#produtos">IA para Saúde</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Portal IA Brasil. Todos os direitos reservados.</p>
                <div class="footer-bottom-links">
                    <a href="#">Política de Privacidade</a>
                    <a href="#">Termos de Uso</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/news.js"></script>
    
    <script>
        // Funções específicas para a página de notícias
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar notícias iniciais
            loadCategoryNews('all');
            
            // Configurar eventos dos botões de filtro
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const category = this.dataset.category;
                    loadCategoryNews(category);
                });
            });
            
            // Configurar busca de notícias
            document.getElementById('news-search-btn').addEventListener('click', searchNews);
            document.getElementById('news-search-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchNews();
                }
            });
            
            // Verificar se há parâmetros na URL
            const urlParams = new URLSearchParams(window.location.search);
            const categoryParam = urlParams.get('category');
            if (categoryParam) {
                // Ativar o filtro correspondente
                const filterBtn = document.querySelector(`.filter-btn[data-category="${categoryParam}"]`);
                if (filterBtn) {
                    filterBtn.click();
                }
            }
        });
        
        function loadCategoryNews(category) {
            const container = document.getElementById('todas-noticias-container');
            container.innerHTML = '<div class="loading-news"><i class="fas fa-spinner fa-spin"></i><p>Carregando notícias...</p></div>';
            
            // Usar a função do news.js para carregar notícias por categoria
            if (typeof fetchRSSFeeds === 'function') {
                fetchRSSFeeds(category).then(news => {
                    if (!news || news.length === 0) {
                        // Usar fallback se o RSS não funcionar
                        if (typeof FALLBACK_NEWS !== 'undefined') {
                            news = FALLBACK_NEWS.filter(item => 
                                category === 'all' || item.category.toLowerCase().includes(category)
                            ).map(item => ({
                                ...item,
                                pubDate: item.date
                            }));
                        } else {
                            // Se não houver fallback, mostrar mensagem
                            container.innerHTML = `
                                <div class="no-news">
                                    <i class="fas fa-exclamation-circle"></i>
                                    <h3>Nenhuma notícia disponível</h3>
                                    <p>Não foi possível carregar as notícias no momento.</p>
                                </div>
                            `;
                            updateNewsCount(0);
                            return;
                        }
                    }
                    
                    renderNews(news, 'todas-noticias-container');
                    updateNewsCount(news.length);
                }).catch(error => {
                    console.error('Erro ao carregar notícias:', error);
                    container.innerHTML = `
                        <div class="no-news">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Erro ao carregar notícias</h3>
                            <p>Ocorreu um erro ao carregar as notícias. Tente novamente mais tarde.</p>
                        </div>
                    `;
                    updateNewsCount(0);
                });
            } else {
                // Se a função fetchRSSFeeds não estiver disponível
                container.innerHTML = `
                    <div class="no-news">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Função não disponível</h3>
                        <p>O sistema de notícias não está funcionando corretamente.</p>
                    </div>
                `;
                updateNewsCount(0);
            }
        }
        
        function searchNews() {
            const searchTerm = document.getElementById('news-search-input').value.toLowerCase();
            if (searchTerm.trim() === '') {
                // Se a busca estiver vazia, recarregar todas as notícias
                const activeCategory = document.querySelector('.filter-btn.active').dataset.category;
                loadCategoryNews(activeCategory);
                return;
            }
            
            const container = document.getElementById('todas-noticias-container');
            container.innerHTML = '<div class="loading-news"><i class="fas fa-spinner fa-spin"></i><p>Buscando notícias...</p></div>';
            
            // Buscar notícias que correspondam ao termo
            if (typeof fetchRSSFeeds === 'function') {
                fetchRSSFeeds('all').then(allNews => {
                    if (!allNews || allNews.length === 0) {
                        if (typeof FALLBACK_NEWS !== 'undefined') {
                            allNews = FALLBACK_NEWS.map(item => ({
                                ...item,
                                pubDate: item.date
                            }));
                        } else {
                            container.innerHTML = `
                                <div class="no-news">
                                    <i class="fas fa-search"></i>
                                    <h3>Nenhuma notícia encontrada</h3>
                                    <p>Não encontramos resultados para "${searchTerm}".</p>
                                </div>
                            `;
                            updateNewsCount(0);
                            return;
                        }
                    }
                    
                    const filteredNews = allNews.filter(item => 
                        item.title.toLowerCase().includes(searchTerm) || 
                        (item.description && item.description.toLowerCase().includes(searchTerm))
                    );
                    
                    if (filteredNews.length === 0) {
                        container.innerHTML = `
                            <div class="no-news">
                                <i class="fas fa-search"></i>
                                <h3>Nenhuma notícia encontrada</h3>
                                <p>Não encontramos resultados para "${searchTerm}". Tente outros termos.</p>
                            </div>
                        `;
                        updateNewsCount(0);
                    } else {
                        renderNews(filteredNews, 'todas-noticias-container');
                        updateNewsCount(filteredNews.length);
                    }
                }).catch(error => {
                    console.error('Erro na busca:', error);
                    container.innerHTML = `
                        <div class="no-news">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Erro na busca</h3>
                            <p>Ocorreu um erro ao buscar notícias. Tente novamente mais tarde.</p>
                        </div>
                    `;
                    updateNewsCount(0);
                });
            }
        }
        
        function updateNewsCount(count) {
            if (document.getElementById('news-shown') && document.getElementById('news-total')) {
                document.getElementById('news-shown').textContent = count;
                document.getElementById('news-total').textContent = count;
            }
        }
        
        function renderNews(news, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            if (!news || news.length === 0) {
                container.innerHTML = `
                    <div class="no-news">
                        <i class="fas fa-newspaper"></i>
                        <h3>Nenhuma notícia disponível</h3>
                        <p>Não há notícias para exibir nesta categoria.</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            news.forEach(item => {
                const date = item.pubDate ? new Date(item.pubDate).toLocaleDateString('pt-BR') : '';
                const categoryClass = item.category ? item.category.toLowerCase().replace(/\s+/g, '-') : 'geral';
                
                html += `
                    <div class="news-card">
                        <div class="card-img">
                            <img src="${item.image || '../assets/images/placeholder-news.jpg'}" alt="${item.title}">
                            <span class="category ${categoryClass}">${item.category || 'Geral'}</span>
                        </div>
                        <div class="card-content">
                            <h3>${item.title}</h3>
                            <p>${item.description || ''}</p>
                            <div class="card-meta">
                                <span class="date">${date}</span>
                                <a href="${item.link || '#'}" class="read-more" target="_blank">Ler mais <i class="fas fa-arrow-right"></i></a>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
    </script>
</body>
</html>